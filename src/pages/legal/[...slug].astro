---
// src/pages/legal/[...slug].astro
// Versión: 1.8 | Fix: Visibilidad de Listas (prose-invert)
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import type { CollectionEntry } from 'astro:content';

export const prerender = true;

export async function getStaticPaths() {
  const legalPages = await getCollection('legal');
  return legalPages.map(page => ({
    params: { slug: page.slug },
    props: page, 
  }));
}

const page = Astro.props as CollectionEntry<'legal'>;
const { Content } = await page.render();
---

<Layout title={page.data.title} description={`Documento legal: ${page.data.title}`}>
  
  <header 
    id="header-legal" 
    class="relative h-72 flex items-center justify-center text-center text-text-inverted pt-32"
  >
    <div class="absolute inset-0 bg-primary/90 z-0"></div>
    <div class="absolute inset-x-0 top-0 h-48 bg-gradient-to-b from-secondary/30 to-transparent opacity-50"></div>
  
    <div class="relative z-10 px-8 animate-fade-in-up">
      <h1 class="text-4xl md:text-5xl font-serif font-bold text-white">
        {page.data.title}
      </h1>
    </div>
  </header>

  <section class="py-20 px-8 bg-primary">
   
     <div class="container mx-auto max-w-4xl">
      
      <article 
        class="
          prose prose-lg max-w-none font-sans 
          bg-secondary/70 backdrop-blur-md border border-white/10 rounded-2xl p-8 md:p-12
          prose-invert 
          prose-headings:text-white prose-headings:font-serif
          prose-p:text-text-base/80
          
          /* --- CORRECCIÓN V1.8 --- */
          prose-li:text-text-base/80 /* <-- Esta línea soluciona el texto oscuro */
          /* --- FIN CORRECCIÓN --- */

          prose-strong:text-white
          prose-a:text-accent prose-a:font-bold hover:prose-a:text-white
          prose-ul:list-disc prose-ul:marker:text-accent
          prose-ol:marker:text-accent
        "
      >
        <Content />
      </article>

    </div>
  </section>
</Layout>

<style>
  @keyframes fade-in-up {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in-up { animation: fade-in-up 0.8s ease-out forwards; }
</style>